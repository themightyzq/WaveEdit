================================================================================
QA TEST PLAN SUMMARY: ParametricEQ Preview & RMS Normalization
================================================================================

DOCUMENTS CREATED:

1. QA_TEST_PLAN_PARAMETRIC_EQ_RMS_NORMALIZE.md
   - Comprehensive test plan with 67+ test cases
   - Organized by feature area and severity level
   - Detailed reproduction steps and expected results
   - Edge cases and failure criteria clearly defined

2. QA_TEST_QUICK_REFERENCE.md
   - One-page quick reference for testers
   - Critical workflows highlighted
   - Common issues to watch for
   - Best practices and performance targets

3. QA_TEST_EXECUTION_LOG.md
   - Test execution template for tracking results
   - Failure log template for detailed documentation
   - Performance measurement checklist
   - Regression test tracking
   - Sign-off section for QA completion

================================================================================
TEST COVERAGE BREAKDOWN
================================================================================

FEATURE 1: ParametricEQ Preview Optimization
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Test Categories:
  1.1 Rapid Slider Movement Testing (3 tests)
     - Gain, frequency, Q adjustments
     - Verify no artifacts during rapid changes

  1.2 All Three Bands Parameter Testing (2 tests)
     - Independent band control
     - Multi-band simultaneous adjustment

  1.3 Extreme Settings Testing (3 tests)
     - Maximum boost/cut (+/-20dB)
     - Extreme frequency values (20Hz, 20kHz)

  1.4 Loop Preview Mode Testing (2 tests)
     - Loop toggle behavior
     - Boundary accuracy (sample-accurate)

  1.5 Preview → Apply → Undo Workflow (3 tests)
     - Changes persist after dialog close
     - Undo reverses perfectly
     - Cancel preserves original

  1.6 Multi-Document Preview Interaction (2 tests)
     - Muting of other documents
     - Selection offset correctness

  1.7 Parameter Persistence (1 test)
  1.8 UI State and Responsiveness (3 tests)

Total ParametricEQ Tests: 25 tests
Critical P0 Tests: 3 (apply, undo, cancel)
P1 Tests: 16 (artifacts, responsiveness, accuracy)
P2/P3 Tests: 6 (cosmetics, UI state)

FEATURE 2: RMS Normalization
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Test Categories:
  2.1 Mode Switching Testing (3 tests)
     - Peak to RMS toggle
     - RMS to Peak toggle
     - Value recalculation on switch

  2.2 RMS Calculation Accuracy (4 tests)
     - Known signal accuracy
     - Mathematical correctness
     - Silent audio handling
     - Partial selection support

  2.3 RMS Normalization Preview (3 tests)
     - Preview gain application
     - Calculation accuracy
     - Loop mode support

  2.4 Settings Persistence (3 tests)
     - Dialog instance persistence
     - App restart persistence
     - Target value NOT persisted

  2.5 Multi-Mode Workflow (2 tests)
     - Mode switching during editing
     - Apply uses correct mode

  2.6 Edge Case Testing (4 tests)
     - RMS equals target (no change)
     - Extreme targets (-60dB, +20dB)
     - Small selections (<100ms)

  2.7 UI Display and Layout (3 tests)
  2.8 Gain Warning Color (2 tests)

Total RMS Normalization Tests: 30 tests
Critical P0 Tests: 4 (calculation, silence, persistence, mode)
P1 Tests: 18 (mode switching, accuracy, preview)
P2/P3 Tests: 8 (UI, colors, layout)

CROSS-FEATURE & REGRESSION TESTING
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Part 3: Integration (2 tests)
  - Normalize then EQ
  - EQ then Normalize

Part 4: Performance & Stress (4 tests)
  - 1-hour file ParametricEQ preview
  - 1-hour file RMS calculation
  - Memory usage verification
  - UI responsiveness

Part 5: Regression (3 tests)
  - Fade operations still work
  - Region list unaffected
  - Existing undo chain works

Total Integration/Regression Tests: 9 tests

================================================================================
SEVERITY DISTRIBUTION
================================================================================

P0 (Blocker) - RELEASE BLOCKING: 11 tests
├─ ParametricEQ Apply/Undo/Cancel: 3
├─ RMS Calculation/Silence/Persistence: 4
└─ Mode Selection & Apply: 4

P1 (Major) - Must mostly pass: 34 tests
├─ ParametricEQ responsiveness & artifacts: 16
├─ RMS mode switching & preview: 18

P2 (Minor) - Nice to have: 16 tests
├─ UI cosmetics and state: 8 each

P3 (Cosmetic) - Polish: 6 tests

Total Tests: 67+ with detailed substeps

================================================================================
CRITICAL P0 TEST CHECKLIST
================================================================================

ParametricEQ P0 Tests (3):
  □ 1.5.1 - Apply changes persist (audio + waveform)
  □ 1.5.2 - Undo reverses perfectly (sample-accurate)
  □ 1.5.3 - Cancel preserves original

RMS Normalization P0 Tests (4):
  □ 2.2.1 - RMS accurate on known signal (-3dB sine)
  □ 2.2.3 - RMS on silence returns -INF (not NaN/error)
  □ 2.4.2 - Mode persists across app restart
  □ 2.5.2 - Apply uses correct mode (not swapped)

These 7 tests are NON-NEGOTIABLE for release.

================================================================================
TEST EXECUTION WORKFLOW
================================================================================

1. Setup Phase
   - Build WaveEdit (Debug + Release)
   - Prepare test audio files
   - Configure audio device
   - Verify baseline undo/redo works

2. ParametricEQ Testing (2-3 hours)
   - Start with P0 tests (30 min)
   - Move to P1 critical workflows (1 hour)
   - Test edge cases and loops (45 min)
   - Multi-document testing (30 min)

3. RMS Normalization Testing (2-3 hours)
   - Mode switching tests (30 min)
   - Calculation accuracy (45 min)
   - Preview and settings (45 min)
   - Edge cases and persistence (30 min)

4. Integration & Regression (1 hour)
   - Cross-feature workflows
   - Existing feature compatibility
   - Multi-document state

5. Performance Testing (30 min)
   - Large file responsiveness
   - Memory usage profiling
   - CPU measurement

6. Final Verification (30 min)
   - Re-test all P0 failures (if any)
   - Confirm no new regressions
   - Document sign-off

Total Estimated Time: 7-8 hours per platform (macOS + Windows)

================================================================================
KEY TESTING PRINCIPLES
================================================================================

1. ALWAYS TEST WITH PREVIEW FIRST
   - Listen to changes before applying
   - Verify meter shows expected change
   - Check for artifacts (clicks, pops, distortion)

2. VERIFY UNDO CHAIN EVERY TIME
   - Operation appears in Edit menu
   - Cmd+Z reverses perfectly
   - Audio identical to original (byte-for-byte not required, but sonically)

3. CHECK BOTH CALCULATION MODES
   - Peak and RMS displayed simultaneously
   - Labels accurately reflect selected mode
   - Required gain calculated correctly

4. TEST LOOP BOUNDARIES
   - Use precise selections (e.g., 5.0s to 10.0s)
   - Listen for seamless loop restart
   - Verify no click at boundary

5. TEST ACROSS FILE TYPES
   - Speech (moans.wav - dynamic)
   - Music (stereo, steady compression)
   - Tones (sine wave - predictable RMS)
   - Noise/ambience (pink noise)

6. STRESS TEST WITH LARGE FILES
   - 1-hour audio minimum
   - Multiple channels (stereo)
   - High sample rates (96kHz)

================================================================================
COMMON FAILURE MODES TO WATCH FOR
================================================================================

ParametricEQ:
  - Filter instability at extreme frequencies (ringing/resonance)
  - Audio artifacts at slider boundary transitions
  - Loop restart boundary off by samples (coordinate system bug)
  - Preview muting doesn't prevent other documents' audio
  - Undo history missing operation
  - Settings not persisted between dialog instances

RMS Normalization:
  - RMS calculation >= Peak (mathematically impossible)
  - RMS on silence returns NaN instead of -INF
  - Mode not saved to settings (resets to Peak on restart)
  - Preview applies gain from wrong mode
  - Required gain calculation incorrect (sign or magnitude)
  - Labels don't update when mode changes
  - Target level carries over between different files

================================================================================
RELEASE READINESS CRITERIA
================================================================================

MINIMUM (Releasable):
  ✓ All P0 tests PASS
  ✓ 95%+ of P1 tests PASS
  ✓ No P0/P1 regressions in existing features
  ✓ Documented workarounds for any P2 issues

POLISHED (Recommended):
  ✓ 100% of P0/P1 tests PASS
  ✓ 90%+ of P2 tests PASS
  ✓ 100% regression tests PASS
  ✓ Performance targets met
  ✓ Cross-platform testing complete

DO NOT RELEASE:
  ✗ Any P0 test failing
  ✗ Audio artifacts or distortion
  ✗ Undo chain broken
  ✗ Settings not persisting
  ✗ Multiple documents playing simultaneously

================================================================================
QA SIGN-OFF
================================================================================

After testing, QA tester must complete:
  □ Test Execution Log (detailed results)
  □ Failure documentation (for each P0/P1 failure)
  □ Performance measurements
  □ Platform-specific notes (macOS vs Windows)
  □ Recommendation for release/hold
  □ Date and signature

QA can APPROVE FOR RELEASE if:
  ✓ All P0 tests pass
  ✓ P1 pass rate >= 95%
  ✓ No blocking issues found
  ✓ Regression tests clean

QA must RECOMMEND HOLD if:
  ✗ Any P0 test fails
  ✗ P1 pass rate < 95%
  ✗ Audio quality issues detected
  ✗ Existing features broken

================================================================================
REFERENCES
================================================================================

Implementation Files:
  • /Source/UI/ParametricEQDialog.cpp
  • /Source/UI/NormalizeDialog.cpp
  • /Source/Audio/AudioEngine.h
  • /Source/DSP/ParametricEQ.cpp
  • /Source/Audio/AudioProcessor.h (RMS/Peak calculation)

Architecture:
  • Preview modes: DISABLED, REALTIME_DSP, OFFLINE_BUFFER
  • Parameter updates: Atomic exchange, real-time safe
  • Coordinate system: Selection offset for preview playback
  • Muting: Only one AudioEngine can preview at a time

Test Files:
  • /TestFiles/moans.wav (primary test file)
  • Test signal generation via sox (sine, noise)

================================================================================
